---
title: 'Tool->Diff Adjust差分线宽间距'
date: Wed, 18 Jan 2023 07:18:04 +0000
draft: false
tags: ['TY-Skill']
---

功能说明
----

根据选定的规则和设定值修改对应的差分线宽、间距和规则

![](https://a1024.synology.me:222/images/blog2023/diffadj.gif)

适用范围
----

所有需要修改的差分线必须创建Class后再调用差分规则，相关几种情况无法识别：

*   差分线直接调用对应的差分规则，程序无法识别；
*   创建Class并调用差分规则后，动修改调用界面的值，导致规则值和实际调用值不一致，无法识别。
*   创建Class并调用差分规则后，布线和规则不一致，会导致修改后和目标线宽间距值不一致，无法使用；

建议修改圆弧布线时，建议做到以下几点：

*   将连接完整的线使用其它工具截成两段（即有一端线头悬空），效果更好；如果不截断，会有一端出线被修改为任意角度布线，手动修改成圆弧即可；
*   一端悬空的布线，请确保一开始是平行且匹配的差分，否则未匹配部分没有调整的意义，采用任意角度取点连接（换层的圆弧布线可以将过孔删除后，再修改）；
*   如果计算圆弧的半径在修改后会<0或=0，此条线段会整体修改失败；
*   在非135度布线的基础上做过差分对间圆弧等长的，由Allegro在这种条件生成的两段圆弧间有很短的一段直线，会导致计算失败，暂无法处理；
*   圆弧支持还不是很好。

差分中由XNET组成的不能修改（会有提示）

如果没有勾选删除原有布线，在运行一次程序后，会有修改前和修改后的两条布线同时存在，这时如果再修改同一规则下的线宽，会报错；

测试情况有限，其它使用情况暂时稳定。

操作说明
----

![](https://a1024.synology.me:222/images/blog2023/Snipaste_2023-01-18_15-15-16.png)

1.当前差分规则：读取板上设置的差分规则，只要primary gap有不等于0的值，即认为是差分规则；  
2.目标差分规则：根据阻抗需求，此区域需要手动更改；  
3.功能设置区域：

*   Cset\_Name：读取到规则管理器已经设置好的差分规则；
*   Constraint：选中后，同时会修改规则管理器中对应规则的线宽和间距值；
*   Innerlayer：选中后，修改内层的线宽（间距）时，会统一修改所有内层的值；
*   Delete Old：选中后，删除现有的差分线，用目标规则值在原有路径上重新创建差分线；不选中，则有部分线宽会和原有布线重合。